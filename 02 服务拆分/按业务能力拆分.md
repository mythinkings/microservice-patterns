# 模式：按业务能力分解

# 语境

您正在开发一个大型，复杂的应用程序，并希望使用[微服务架构](https://microservices.io/patterns/cn/microservices.html)。微服务架构将应用程序构造为一组松耦合服务。微服务架构的目标是通过实现连续交付/部署来加速软件开发。

![img](https://microservices.io/i/successtriangle.png)

微服务架构通过两种方式来做到这一点：

1. 简化测试并允许组件独立部署
2. 将工程组织结构化为一组小型（6-10名成员）的自治团队，每个团队负责一个或多个服务

这些好处不会自动得到保证。而是只能通过将应用程序仔细分解为服务才能实现。

服务必须足够小，以便由小型团队开发并易于测试。面向对象设计（OOD）的有用指南是“单一责任原则”（[SRP](http://www.objectmentor.com/resources/articles/srp.pdf)）。SRP将班级的责任定义为变更的原因，并指出班级仅应具有变更的理由。将SRP应用于服务设计以及具有凝聚力并实现少量紧密相关功能的设计服务也很有意义。

还可以通过某种方式分解应用程序，以便大多数新的和更改的需求仅影响单个服务。这是因为影响多个服务的变更需要多个团队之间的协调，这减慢了开发速度。OOD的另一个有用原则是通用闭包原则（CCP），该原则规定，出于相同原因而更改的类应位于同一包中。例如，也许两个类实现了同一业务规则的不同方面。目的是当该业务规则更改开发人员时，只需要更改少量（理想情况下只有一个）程序包中的代码。在设计服务时，这种思路很有意义，因为它将有助于确保每次更改仅影响一项服务。

# 问题

如何将应用程序分解为服务？

# 势力

- 架构必须稳定
- 服务必须具有凝聚力。服务应实现一小组高度相关的功能。
- 服务必须符合共同封闭原则-一起变更的事物应打包在一起-以确保每次变更仅影响一项服务
- 服务必须是松散耦合的-每个服务都是封装其实现的API。可以在不影响客户的情况下更改实现
- 服务应该是可测试的
- 每种服务的规模都小到足以由“两个披萨”团队（即6-10人的团队）开发
- 拥有一项或多项服务的每个团队必须是自治的。一个团队必须能够与其他团队进行最少的协作来开发和部署他们的服务。

## 解

定义与业务能力相对应的服务

## 相关模式

- “[按子域分解”](https://microservices.io/patterns/cn/decomposition/decompose-by-subdomain.html)模式是另一种模式